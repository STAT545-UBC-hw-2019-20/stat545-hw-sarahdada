---
title: "extra"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
 gapminder %>% 
  group_by (continent) %>% 
  summarise(min_GDP=min(gdpPercap),min_country=min_country[gdpPercap==min_GDP],min_year=min_year[gdpPercap==min_GDP],
  summarise(max_GDP=max(gdpPercap), max_country=max_country[gdpPercap==min_GDP],min_year=min_year[gdpPercap==min_GDP]) %>%
  arrange(min_GDP)
  
  ```{r}

```





Extra:
```{r}
 
ggplot(subset(gapminder, continent != "Oceania"),
       aes(x = year, y = lifeExp, group = country, color = country)) +
  geom_line(lwd = 1, show.legend = FALSE) + facet_wrap(~ continent) +
  scale_color_manual(values = country_colors) +
  theme_bw() + theme(strip.text = element_text(size = rel(1.1)))
  
  



gapminder2 %>%
    select(continent,MinGDP,MaxGDP) %>% 
    gather(var,gdp, -continent)%>%
    ggplot(aes(x = continent, y = gdp, fill = var)) +
    geom_col(position = position_dodge()) +
  labs(
    title = "GDP in Various Continents",
    subtitle = "GDP analysis of several countries per continent"
  )





 
 ggplot(gapminder, aes((MinGDP=min(gdpPercap)),continent)) +
  ggridges:: geom_density_ridges(
    aes(x = Continent, fill = paste(MinGDP=min(gdpPercap), MaxGDP=max(gdpPercap))), 
    alpha = .8, color = "white", from = 0, to = 100
  ) 
 
 
 gapminder %>% 
  group_by(continent) %>% 
  summarise(MinGDP=min(gdpPercap),Mincountry=country[gdpPercap==MinGDP],Minyear=year[gdpPercap==MinGDP],MaxGDP=max(gdpPercap),Maxcountry=country[gdpPercap==MaxGDP],Maxyear=year[gdpPercap==MaxGDP])%>% 
  mutate(Range=MaxGDP-MinGDP)%>%
 ggplot(aes(y = continent)) +
 geom_density_ridges(
    aes(x=GDP, fill = paste(MinGDP=min(gdpPercap), MaxGDP=max(gdpPercap))), 
    alpha = .8, color = "white", from = 0, to = 100
  ) 
 
 
  
 
 library(dplyr)
library(forcats)
Catalan_elections %>%
  mutate(YearFct = fct_rev(as.factor(Year))) %>%
  ggplot(aes(y = YearFct)) +
  geom_density_ridges(
    aes(x = Percent, fill = paste(YearFct, Option)), 
    alpha = .8, color = "white", from = 0, to = 100
  ) 
 
 
 
 
  
 library(dplyr)
library(forcats)
Catalan_elections %>%
  mutate(YearFct = fct_rev(as.factor(Year))) %>%
  ggplot(aes(y = YearFct)) +
  geom_density_ridges(
    aes(x = Continent, fill = paste(MinGDP=min(gdpPercap), MaxGDP=max(gdpPercap))), 
    alpha = .8, color = "white", from = 0, to = 100
  ) 
 
 
 
 
 
  ggplot(aes(y = country)) +
  geom_density_ridges(
    aes(x =gdpPercap, fill = paste(MinGDP, maxGDP)), 
    alpha = .8, color = "white", from = 0, to = 100
  ) +
  labs(
    x = "Vote (%)",
    y = "Election Year",
    title = "Indy vs Unionist vote in Catalan elections",
    subtitle = "Analysis unit: municipalities (n = 949)",
    caption = "Marc Belzunces (@marcbeldata) | Source: Idescat"
  ) 


+
  scale_y_discrete(expand = c(0.01, 0)) +
  scale_x_continuous(expand = c(0.01, 0)) +
  scale_fill_cyclical(
    breaks = c("1980 Indy", "1980 Unionist"),
    labels = c(`1980 Indy` = "Indy", `1980 Unionist` = "Unionist"),
    values = c("#ff0000", "#0000ff", "#ff8080", "#8080ff"),
    name = "Option", guide = "legend"
  ) +
  theme_ridges(grid = FALSE)







ggplot(gapminder, aes((MinGDP=min(gdpPercap)), continent)) +
  ggridges::geom_density_ridges()

gapminder %>% 
  group_by(continent) %>% 
  summarise(MinGDP=min(gdpPercap),Mincountry=country[gdpPercap==MinGDP],Minyear=year[gdpPercap==MinGDP],MaxGDP=max(gdpPercap),Maxcountry=country[gdpPercap==MaxGDP],Maxyear=year[gdpPercap==MaxGDP])%>% 
  mutate(Range=MaxGDP-MinGDP)%>%

  ggplot(mtcars, aes(cyl)) +
  geom_bar()

  
  
  
  ggplot(aes(MinGDP, MaxGDP, fill = "Continent")) +
  geom_bar(position = "dodge", stat = "identity") +
  theme_bw()


gapminder %>% 
  group_by(continent) %>% 
  summarise(MinGDP=min(gdpPercap),Mincountry=country[gdpPercap==MinGDP],Minyear=year[gdpPercap==MinGDP],MaxGDP=max(gdpPercap),Maxcountry=country[gdpPercap==MaxGDP],Maxyear=year[gdpPercap==MaxGDP])%>% 
  mutate(Range=MaxGDP-MinGDP)%>%

  ggplot(aes(MinGDP, MaxGDP, fill = "Continent")) +
  geom_bar(position = "dodge", stat = "identity") +
  theme_bw()



  














gapminder %>% 
  group_by(MinGDP=min(gdpPercap),MaxGDP=max(gdpPercap)) %>%
  ggplot(aes(continent,year,color=gdpPercap)) + 
  geom_line(color="blue")+
  geom_line(color="green")
  labs(x="country",y="year",
  title = "Cylinders vs horsepower",
  subtitle= "Information from mtcars"
  )
  
gapminder %>% 
  group_by(MinGDP=min(gdpPercap),MaxGDP=max(gdpPercap)) %>%
  ggplot(aes(continent,year,color=gdpPercap)) + 
  geom_line(color="blue")+
  geom_line(color="green")
  labs(x="country",y="year",
  title = "Cylinders vs horsepower",
  subtitle= "Information from mtcars"
  )  
  

  
  
  gapminder %>% 
  #group_by(country) %>% 
  ggplot(aes(year, lifeExp,group=country,color=country)) +
  geom_line(alpha=0.2)

```

